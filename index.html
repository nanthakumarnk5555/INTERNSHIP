<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tic Tac Toe</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}

body{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,#020617,#0f172a);
  color:#e5e7eb;
}

.screen{display:none;text-align:center;}
.screen.active{display:block;}

h1{color:#38bdf8;margin-bottom:15px;}

input,select,button{
  width:100%;
  padding:12px;
  margin:10px 0;
  border-radius:25px;
  border:none;
  outline:none;
  font-size:15px;
}

button{
  background:#38bdf8;
  color:#020617;
  font-weight:700;
  cursor:pointer;
}

/* GAME */
.wrapper{
  display:flex;
  gap:25px;
  align-items:center;
  justify-content:center;
}

.player{
  width:150px;
  background:#020617;
  padding:15px;
  border-radius:20px;
  border:2px solid transparent;
}

.player.active{border-color:#38bdf8;}
.player.win{border-color:#22c55e;}

.trophy{font-size:40px;display:none;}
.player.win .trophy{display:block;}

.game-box{
  background:#020617;
  padding:25px;
  border-radius:25px;
  text-align:center;
}

.board{
  display:grid;
  grid-template-columns:repeat(3,120px);
  gap:18px;
  margin:15px 0;
}

.cell{
  width:120px;
  height:120px;
  background:#0f172a;
  border-radius:18px;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:3.8rem;
  cursor:pointer;
}

.cell.X{color:#22c55e;}
.cell.O{color:#facc15;}

.back{
  position:absolute;
  top:20px;
  left:20px;
}

/* CONFETTI */
.confetti{
  position:fixed;
  top:-10px;
  width:10px;
  height:10px;
  animation:fall linear forwards;
  z-index:999;
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg);opacity:0;}
}
</style>
</head>

<body>

<!-- START SCREEN -->
<div class="screen active" id="start">
  <h1>üéÆ Tic Tac Toe</h1>
  <input id="name" placeholder="Enter your name">
  <select id="mode">
    <option value="pvp">Player vs Player</option>
    <option value="cpu">Player vs Machine</option>
  </select>
  <button onclick="startGame()">Start</button>
</div>

<button class="back" onclick="goBack()">‚¨Ö Back</button>

<!-- GAME SCREEN -->
<div class="screen" id="game">
  <div class="wrapper">

    <div class="player active" id="px">
      <h3 id="p1">Player 1</h3>
      <div class="trophy">üèÜ</div>
    </div>

    <div class="game-box">
      <h1>Tic Tac Toe</h1>
      <div id="status"></div>

      <div class="board">
        <div class="cell" data-i="0"></div>
        <div class="cell" data-i="1"></div>
        <div class="cell" data-i="2"></div>
        <div class="cell" data-i="3"></div>
        <div class="cell" data-i="4"></div>
        <div class="cell" data-i="5"></div>
        <div class="cell" data-i="6"></div>
        <div class="cell" data-i="7"></div>
        <div class="cell" data-i="8"></div>
      </div>

      <button onclick="resetGame()">Restart</button>
    </div>

    <div class="player" id="po">
      <h3 id="p2">Player 2</h3>
      <div class="trophy">üèÜ</div>
    </div>

  </div>
</div>

<!-- SOUNDS -->
<audio id="clickSound" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>
<audio id="winSound" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio>

<script>
const start=document.getElementById('start');
const game=document.getElementById('game');
const cells=document.querySelectorAll('.cell');
const status=document.getElementById('status');
const px=document.getElementById('px');
const po=document.getElementById('po');
const p1=document.getElementById('p1');
const p2=document.getElementById('p2');

let board=Array(9).fill('');
let current='X';
let active=true;
let mode='pvp';

const wins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

function startGame(){
  const name=document.getElementById('name').value || 'Player 1';
  mode=document.getElementById('mode').value;
  p1.textContent=name+' (X)';
  p2.textContent= mode==='cpu'?'Machine (O)':'Player 2 (O)';
  start.classList.remove('active');
  game.classList.add('active');
  status.textContent=name+' Turn';
}

function goBack(){
  game.classList.remove('active');
  start.classList.add('active');
  resetGame();
}

cells.forEach(c=>c.onclick=()=>play(c));

function play(cell){
  document.getElementById('clickSound').play();
  const i=cell.dataset.i;
  if(board[i]||!active) return;
  board[i]=current;
  cell.textContent=current;
  cell.classList.add(current);

  if(checkWin()) return;
  switchTurn();
  if(mode==='cpu' && current==='O') cpuMove();
}

function cpuMove(){
  const empty=board.map((v,i)=>v===''?i:null).filter(v=>v!==null);
  const m=empty[Math.floor(Math.random()*empty.length)];
  setTimeout(()=>cells[m].click(),400);
}

function checkWin(){
  for(let w of wins){
    const[a,b,c]=w;
    if(board[a]&&board[a]===board[b]&&board[a]===board[c]){
      active=false;
      (current==='X'?px:po).classList.add('win');
      status.textContent=(current==='X'?p1.textContent:p2.textContent)+' Wins!';
      document.getElementById('winSound').play();
      confetti();
      return true;
    }
  }
  if(!board.includes('')){
    status.textContent='Draw Match';
    active=false;
    return true;
  }
  return false;
}

function confetti(){
  for(let i=0;i<40;i++){
    const d=document.createElement('div');
    d.className='confetti';
    d.style.left=Math.random()*100+'vw';
    d.style.background=`hsl(${Math.random()*360},100%,50%)`;
    d.style.animationDuration=2+Math.random()*2+'s';
    document.body.appendChild(d);
    setTimeout(()=>d.remove(),4000);
  }
}

function switchTurn(){
  current=current==='X'?'O':'X';
  px.classList.toggle('active',current==='X');
  po.classList.toggle('active',current==='O');
  status.textContent=current==='X'?p1.textContent+' Turn':p2.textContent+' Turn';
}

function resetGame(){
  board.fill('');
  active=true;
  current='X';
  cells.forEach(c=>{c.textContent='';c.className='cell';});
  px.className='player active';
  po.className='player';
}
</script>

</body>
</html>
